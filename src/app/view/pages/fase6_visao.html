{% extends "base.html" %}
{% block title %}Dashboard ‚Äì Fase 6 (Vis√£o Computacional){% endblock %}

{% block content %}

<style>
  .fase6-grid-2 {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 20px;
  }

  .fase6-grid-3 {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 20px;
  }

  .fase6-card {
    background: #fff;
    border-radius: 10px;
    padding: 16px 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  }

  .fase6-img {
    width: auto;
    height: 150px;
    display: block;
    border-radius: 8px;
  }

  .fase6-img-mid{
      width: 100%;
      height: auto;
      border-radius: 8px;
      display: block;
  }

  .inference-images {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      padding: 24px;
  }

  .fase6-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
  }

  .fase6-table th,
  .fase6-table td {
    border: 1px solid #ddd;
    padding: 8px 10px;
    text-align: center;
  }

  .fase6-table th {
    background: #f5f5f5;
    font-weight: 600;
  }

  @media (max-width: 900px) {
    .fase6-grid-2,
    .fase6-grid-3 {
      grid-template-columns: 1fr;
    }
  }
</style>

<h1>üëÅÔ∏è Vis√£o Computacional ‚Äì Fase 6</h1>
<p>
  Nesta fase, a <strong>FarmTech Solutions</strong> experimentou a detec√ß√£o de objetos com
  <strong>YOLOv5</strong>, treinando modelos para reconhecer
  <strong>banana</strong> e <strong>garfo</strong> em um dataset customizado.
</p>

<hr>

<h2>üìâ Treinamento YOLOv5</h2>
<div class="fase6-card">
  <p>
    Curvas de <strong>loss</strong> (treino/valida√ß√£o) e m√©tricas de
    <strong>precis√£o / recall / mAP</strong> ao longo das √©pocas para o experimento principal.
  </p>
<table class="table">
    <thead>
        <tr>
            <th>M√©trica</th>
            <th>Modelo 30 √âpocas (YOLOv5s)</th>
            <th>Modelo 60 √âpocas (YOLOv5s)</th>
            <th>Modelo 60 √âpocas (YOLOv5m)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>mAP@0.50 (Geral)</td>
            <td>0.393</td>
            <td>0.513</td>
            <td>0.789</td>
        </tr>
        <tr>
            <td>mAP@0.50 (Banana)</td>
            <td>0.687</td>
            <td>0.764</td>
            <td>0.995</td>
        </tr>
        <tr>
            <td>mAP@0.50 (Fork)</td>
            <td>0.0999</td>
            <td>0.262</td>
            <td>0.584</td>
        </tr>
        <tr>
            <td>Tamanho do modelo (MB)</td>
            <td>14.4</td>
            <td>14.4</td>
            <td>42.2</td>
        </tr>
        <tr>
            <td>Tempo de treino (h)</td>
            <td>0.56</td>
            <td>1.13</td>
            <td>0.13</td>
        </tr>
    </tbody>
</table>

</div>

<h2>üß™ Infer√™ncia em Imagens de Teste</h2>
<div class="fase6-card">
  <p>
    Exemplos de detec√ß√£o no conjunto de teste, com as caixas delimitadoras e
    probabilidades previstas pelo modelo.
  </p>
    <div class="inference-images">
        <img
            src="/assets/plots/{{ data.charts.inference_example_1 }}"
            alt="Exemplos de detec√ß√£o YOLOv5 em imagens de teste"
            class="fase6-img"
          >
        <img
        src="/assets/plots/{{ data.charts.inference_example_2 }}"
        alt="Exemplos de detec√ß√£o YOLOv5 em imagens de teste"
        class="fase6-img"
        >
        <img
        src="/assets/plots/{{ data.charts.inference_example_3 }}"
        alt="Exemplos de detec√ß√£o YOLOv5 em imagens de teste"
        class="fase6-img"
        >
        <img
        src="/assets/plots/{{ data.charts.inference_example_6 }}"
        alt="Exemplos de detec√ß√£o YOLOv5 em imagens de teste"
        class="fase6-img"
      >
        <img
        src="/assets/plots/{{ data.charts.inference_example_7 }}"
        alt="Exemplos de detec√ß√£o YOLOv5 em imagens de teste"
        class="fase6-img"
      >
        <img
        src="/assets/plots/{{ data.charts.inference_example_1 }}"
        alt="Exemplos de detec√ß√£o YOLOv5 em imagens de teste"
        class="fase6-img"
      >
    </div>
</div>

<h2>üìä Compara√ß√£o de Modelos</h2>

<div class="fase6-grid-2">
  <div class="fase6-card">
    <h3>mAP@0.50 por √âpoca</h3>
    <p>
      Evolu√ß√£o do <strong>mAP@0.50</strong> ao longo das √©pocas para
      os modelos <em>small</em> e <em>medium</em>.
    </p>
    <img
      src="/assets/plots/{{ data.charts.map_epochs }}"
      alt="mAP por √©poca para modelos small e medium"
      class="fase6-img-mid"
    >
  </div>

  <div class="fase6-card">
    <h3>Val Box Loss</h3>
    <p>
      Compara√ß√£o da perda de valida√ß√£o das <strong>bounding boxes</strong> (val/box_loss)
      entre os modelos treinados.
    </p>
    <img
      src="/assets/plots/{{ data.charts.val_box_loss }}"
      alt="Compara√ß√£o de val/box_loss entre modelos"
      class="fase6-img-mid"
    >
  </div>
</div>

<div class="fase6-grid-2" style="margin-top: 20px;">
  <div class="fase6-card">
    <h3>mAP por Modelo e Classe</h3>
    <p>
      Compara√ß√£o final de <strong>mAP@0.50</strong> por modelo
      (30 e 60 √©pocas ‚Äì small, 60 √©pocas ‚Äì medium) e por classe
      (<em>banana</em> e <em>garfo</em>).
    </p>
    <img
      src="/assets/plots/{{ data.charts.map_models }}"
      alt="Comparativo de mAP por modelo e classe"
      class="fase6-img-mid"
    >
  </div>

  <div class="fase6-card">
    <h3>Tabela Gr√°fica de Performance</h3>
    <p>
      Vis√£o consolidada das m√©tricas principais (mAP, tamanho do modelo e tempo de treino).
    </p>
      <h2>Tabela Comparativa de Performance dos Modelos</h2>

<table class="table">
    <thead>
        <tr>
            <th>Modelo</th>
            <th>mAP@.50 Geral</th>
            <th>mAP@.50 Banana</th>
            <th>mAP@.50 Garfo</th>
            <th>Tamanho (MB)</th>
            <th>Tempo (min)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>30 √âpocas (Pequeno)</td>
            <td>0.393</td>
            <td>0.687</td>
            <td>0.0999</td>
            <td>14.4</td>
            <td>34</td>
        </tr>
        <tr>
            <td>60 √âpocas (Pequeno)</td>
            <td>0.513</td>
            <td>0.764</td>
            <td>0.262</td>
            <td>14.4</td>
            <td>68</td>
        </tr>
        <tr>
            <td>60 √âpocas (M√©dio)</td>
            <td>0.789</td>
            <td>0.995</td>
            <td>0.584</td>
            <td>42.2</td>
            <td>8</td>
        </tr>
    </tbody>
</table>

<!--    <img-->
<!--      src="/assets/plots/{{ data.charts.models_table }}"-->
<!--      alt="Tabela comparativa de performance dos modelos"-->
<!--      class="fase6-img"-->
<!--    >-->
  </div>
</div>

<h2 style="margin-top: 30px;">üìë Resumo Num√©rico dos Experimentos</h2>
<div class="fase6-card">
  <table class="fase6-table">
    <thead>
      <tr>
        <th>Modelo</th>
        <th>mAP@0.50 Geral</th>
        <th>mAP@0.50 Banana</th>
        <th>mAP@0.50 Garfo</th>
        <th>Tamanho (MB)</th>
        <th>Tempo (min)</th>
      </tr>
    </thead>
    <tbody>
      {% for row in data.metrics_table %}
      <tr>
        <td>{{ row.modelo }}</td>
        <td>{{ "%.3f"|format(row.map_geral) }}</td>
        <td>{{ "%.3f"|format(row.map_banana) }}</td>
        <td>{{ "%.3f"|format(row.map_garfo) }}</td>
        <td>{{ row.tamanho_mb }}</td>
        <td>{{ row.tempo_min }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<h2 style="margin-top: 30px;">üìù Principais Conclus√µes</h2>
<div class="fase6-card">
  <ul>
    {% for item in data.highlights %}
      <li>{{ item }}</li>
    {% endfor %}
  </ul>

  <p style="margin-top: 10px;">
    Em resumo, para ambientes com <strong>pouca restri√ß√£o de hardware</strong>
    (cloud/desktop), o modelo <strong>YOLOv5m</strong> √© o mais indicado.
    J√° para dispositivos embarcados com mem√≥ria limitada, o
    <strong>YOLOv5s</strong> continua sendo uma op√ß√£o vi√°vel, desde que
    as limita√ß√µes para objetos mais complexos (como o garfo) sejam bem documentadas.
  </p>
</div>

{% endblock %}
